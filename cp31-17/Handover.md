# Client Handover Document 
## CP31 - Traffic sign detection using Computer Vision
**COMP3888 - T17A5**

## Project Description

The aim of this project is to implement effective sign, path and object detection algorithms for self-driving cars by solely relying on the OpenCV library. The algorithms will be tested using data collected from DonkeySim, a virtual car simulation environment. A robust system of tracks, models and scenarios will also be implemented into the simulator to achieve thorough testing of our algorithm, indicative of the real world testing environment.

---
## Documents

- [Proposal Document](https://bitbucket.org/comp3888-t17a/comp3888_t17a_group5/src/master/Client%20Document/CP31%20-%20Project%20Proposal.pdf)
- [Requirements Document](https://bitbucket.org/comp3888-t17a/comp3888_t17a_group5/src/master/Client%20Document/CP31%20-%20Scope%20and%20Requirements%20Document%20September%202020.pdf)
- [Updated Requirements Document](https://bitbucket.org/comp3888-t17a/comp3888_t17a_group5/src/master/Client%20Document/CP31%and%CP32%-%Further%Scope%Information%for%Simulator.pdf)


## Code & Respository
[BitBucket Master Branch](https://bitbucket.org/comp3888-t17a/comp3888_t17a_group5/src/master/)

We have merged the Simulator and OpenCV branch into one (master), so everything is accessible from this one branch.
"rmracerlib" is the OpenCV code while "sdsanbox-master" is the simulator component.

---
## Team Members & Tasks

| Name | Primary Email | Core Role(s) Tasks |
|--|--|--|
| Joseph Pham | jpha9875@uni.sydney.edu.au | Unity (Tracks/Menu) and Blender (Signs) |
| Julian Jee | jjee9913@uni.sydney.edu.au | Blender (Signs) and Unity (Terrain)|
| Winson Chen | wche5722@uni.sydney.edu.au | OpenCV (Detection/Response) |
| Jordan Koukides | jkou3713@uni.sydney.edu.au | OpenCV (Detection/Response) |
| Patrick Delaney | pdel3994@uni.sydney.edu.au | OpenCV (Detection/Response) |
| Kevin Wong | kwon4232@uni.sydney.edu.au | OpenCV (Detection/Response) |

## Video Summaries

### Weekly Updates
| Week | Joseph | Julian | Winson | Jordan | Patrick | Kevin |
|--|--|--|--|--|--|--|
| 3 | [YouTube](https://youtu.be/wntqmtbjNrA) | [YouTube](https://youtu.be/irMm2F9pf3E) | [YouTube](https://www.youtube.com/watch?v=pHWMIZ93FsM&feature=youtu.be) | [YouTube](https://youtu.be/GB4WGke4xqc) | [YouTube](https://youtu.be/odIApRd9wA4) | [YouTube](https://www.youtube.com/watch?v=8tHhfgsKWh0) |
| 4 | [YouTube](https://youtu.be/7wgHn2-TL8Q) | [YouTube](https://youtu.be/MZSYQyzj6QE) | [YouTube](https://www.youtube.com/watch?v=rM5r1o4GcZw) | [YouTube](https://youtu.be/fjnCMovbwYI) | [YouTube](https://youtu.be/qMYV0ok-SJ8) | [YouTube](https://youtu.be/O852INMnsdA) | 
| 5 | [YouTube](https://youtu.be/MzMfo5kRris) | [YouTube](https://youtu.be/1fpxrn-WxKU) | [YouTube](https://youtu.be/ypFiyG5XcMc) | [YouTube](https://youtu.be/2n0r35v0lhQ) | [YouTube](https://youtu.be/dD2xwdkZd5M) | [YouTube](https://www.youtube.com/watch?v=LCfEDyFNM1Y&feature=youtu.beNhttps://www.youtube.com/watch?v=LCfEDyFNM1Y&feature=youtu.be) | 
| 6 | | | | | | | |
| B | [YouTube](https://youtu.be/vifHMOugUYg) | [YouTube](https://youtu.be/9gdj6jzBFLc) | [YouTube](https://youtu.be/OoiP7bQf7Yk) | [YouTube](https://youtu.be/HBzXl955ARs) | [YouTube](https://youtu.be/draYDiHp9u0) | |
| 7 | [YouTube](https://youtu.be/zNlsAHrwFgg) | [YouTube](https://youtu.be/XnfCPEl7UM8) | [YouTube](https://youtu.be/BG6Rq0EJaBM) | [YouTube](https://youtu.be/Lh6B14ZrMx4) | [YouTube](https://youtu.be/dkyaBiGsE8c) | | 
| 8 | [YouTube](https://youtu.be/Zut9YYVZB6E) | [YouTube](https://youtu.be/xnYKgoWVUcM) | [YouTube](https://youtu.be/W9zDYPpIe4c) | [YouTube](https://youtu.be/5LT7qviZ0SA) | [YouTube](https://youtu.be/wl5EmdmHTfY) | [YouTube](https://www.youtube.com/watch?v=iIZ4bTcyNtU) | 
| 9 | [YouTube](https://youtu.be/beiQuRtymx0) | [YouTube](https://youtu.be/KfJBT6Ob7rA) | [YouTube](https://youtu.be/E2STPgE2kHM) | [YouTube](https://youtu.be/8u8-z1hDqfc) | [YouTube](https://youtu.be/ZCqXPDfpZyo) | | 
| 10 | [YouTube](https://youtu.be/qfKMfmIKPIk) | [YouTube](https://youtu.be/lOsDW5RsOTA) | [YouTube](https://youtu.be/BMJQ8k7vIRc) | [YouTube](https://youtu.be/-DKiPoVZ4H8) | [YouTube](https://youtu.be/WdbkfhsOHgk) | | 

### Major Milestones

| Description | Video |
|--|--|
| Client Deployment (Week 7) | [YouTube](https://www.youtube.com/watch?v=YiB3GLciyo4&list=PLfwiy0wVlGXwtHwRymVrPehrioXkUKPEg&index=3&ab_channel=RoboticsMastersLimited)|
|Understanding Environments|[YouTube](https://youtu.be/IOb12vrP5xQ)|
| Unity & Track Generation Workshop | [YouTube](https://www.youtube.com/watch?v=dI-CaKepWIA) (From 0:00:00 - 1:05:02)|
| Elevation Profile | [YouTube](https://youtu.be/NE2oY9FMAKk) |
| Asset Preview | [YouTube](https://www.youtube.com/watch?v=sYmdjIXKRvw&feature=youtu.be&ab_channel=JosephPham)|
|First Presentation|[Google Drive](https://drive.google.com/file/d/1udVZTuIvrrf4W3YcRhZ4Ajp62_CuFsdt/view?usp=sharing)|
|Final Presentation|[Google Drive](https://drive.google.com/file/d/1a7hEBlD5M3iQYnXNlJsG2jKA2ncpP8lp/view?usp=sharing)|
|Video/Show Reel|[Google Drive](https://drive.google.com/file/d/11bGEo0tb5wjEA1xf-MsTRgttSUe9cEcK/view?usp=sharing)|

---
## Documentation

### Documentation in Wiki
|Subject|Link|
|-|-|
|Installation of DonkeyCar software and OpenCV code|[Link](Installation of Software)|
|Creating and Modifying Simulator (Map, Terrain, Menu & Sign Documentation)|[Link](Creating and Modifying Simulator)|
|Car Model Documentation|[Link](Car Model Implementation)|
|Testing Documentation|[Link](Testing Documentation)|
|Camera Configuration|[Link](Camera Configuration)|
 
### Documentation in Wiki
Bitbucket repo for Documentation is linked [here](https://bitbucket.org/comp3888-t17a/comp3888_t17a_group5/src/master/docs/)

## Goal & Deliverables

`We will talk about Goal & Deliverable through separate components`

### Simulator Component
|Goals & Deliverables | Status | Small Description |
|-|-|-|
| Cybertruck Car Model | Complete | We have usefully modelled in a Tesla Cybertruck into the simulator, where a user is able to select the vehicle through the config file. We were unable to create a main menu for vehicles though. |
| Implementation of Robotics Master Track 1 | Complete  | Track 1 has fully been implemented into the Simulator with correct scaling and also added in the blue walls that act as barrier for the map. The traffic signs have also been placed in their respective position as per the client's request |
| Implementation of Robotics Master Track 2 | Complete  | Track 2 has also been fully implemented into the Simulator with the correct scaling and invisible barrier to stop the car from falling off. |
| Implementation of F1 Hockenheim Track | Complete  | Hockenheim has been completed having the correct layout, elevation and width changes. We have also added natural terrain instead of building due to asset and time limitation. We however did not add a pit lane to the map but wasn't that important. |
| Implementation of F1 Monaco Track | Complete  | Monaco has been completed having the correct layout, elevation and width changes. The terrain of Monaco is more realistic having buildings and landscape where they should be in real life. We however did not add a pit lane to the map but wasn't that important. |
| Implementation of All Traffic Signs | Mostly Complete  | We have implemented all main signs and objects given to us in the requirement documentation, this means that we did not add a speed sign to the simulator. Our traffic light is also implemented in the simulator but doesn't not 'emit brightness' correctly but is still inside the simulator |
| Fast way to import new track layout | Complete  | We initially had a template scene where all you had to do was drag the image in and change the dimensions but since Maxime had created a prefab that was essentially the same thing so we decided to use his prefab instead just having a tutorial on how to use it in our documentation |
| Camera Resolution | Complete  | We have correctly implemented changing the camera resolution in the config file, which is now implemented in the template in config. We also tell how we can change it in documentation in "Installation of Software" |
| Documentation of All Processes | Complete  | Documentation for all process was created in the Wiki and we did documentation for creating car models, creating flat and elevated maps, creating terrain, creating menus, also creating and placing signs. |

### OpenCV Component
|Goals & Deliverables | Status | Small Description |
|-|-|-|
| Circle turn sign detection/Response |Complete |Low detection positive hit rate but very successful response success rate, quite high success with direction determination in the detection |
| Arrow turn sign detection/Response |Complete | Low detection positive hit rate but very successful response success rate, quite high success with direction determination in the detection |
| Stop sign detection/Response |Complete | Very high accuracy and recall on the detection as well as consistent performance of response|
| Park sign detection/Response |Complete | Very high accuracy and recall on the detection amongst all the colour variations as well as the appropriate response to the sign |
| Cone detection/Response |Complete | A strongly consistent detection of the code which has high accuracy as well as a consistent response to avoid collision with the cone |
| Traffic light detection/Response | Incomplete| Due to issues within the simulator with baked in lightness it was not possible to implement the detection of the traffic light in such a fashion that would reflect the detection code necessary in a real life scenario |
| Implementation of Speed |Complete | The code now offers the ability to gain access to the speed value from the car within the simulator |
| Implementation of Break |Complete | Within the simulator it is now possible to brake the car rather than applying negative throttle - giving greater level of control if responses |
| Custom Testing Scripts |Complete | Development of these scripts allows rigorous testing in and out of the simulator providing extensive results as highlighted in the lower portion of this document  |
| Documentation |Complete | Every component of our software which needs explanation is provided in the documentation within our repo's wiki |

## Testing Results

The following markdown document summarizes the individual testing logs which can be found on the master branch. The documentation needed to run these tests yourself can be found within the homepage of this wiki.

### Manual Tagging Test Results

| Sign Variation |True Positive %| True Negative % | False Positive % | False Negative % |  Correct Direction % | Testing date and Tester|
|--|--|--|--|--|--|--|
|Stop sign| 50.96 |49.04| 0.00 | 0.00 | N/A | 10/11/2020 by Patrick  |
|Cone| 81.08 |13.51| 6.06 | 5.41 | N/A | 10/11/2020 by Patrick  |
|Green park sign| 75.76|18.18| 6.06 | 0.00 | N/A  | 10/11/2020 by Patrick  |
|White park sign| 38.00 |48.00| 0.00 | 14.00 | N/A |10/11/2020 by Patrick   |
|Yellow park sign| 53.85 |40.38| 0.00 | 5.77 | N/A |10/11/2020 by Patrick   |
|Circle turn| 1.05 |47.38| 7.97 | 38.54 | 90.94 |10/11/2020 by Patrick   |
|Arrow turn| 11.95 |35.77| 8.3 | 41.58 | 91.10 |10/11/2020 by Patrick   |

### Automated Real-World Test Images 

|Sign| Success Rate %|
|--|--|
|Stop Sign| 61.51|
|Green Park| 49.15|
|Left Turn (Circle)|31.64|
|Right Turn (Circle)|17.65|